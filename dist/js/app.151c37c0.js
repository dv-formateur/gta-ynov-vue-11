(function(e){function t(t){for(var n,o,i=t[0],u=t[1],l=t[2],d=0,p=[];d<i.length;d++)o=i[d],s[o]&&p.push(s[o][0]),s[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);c&&c(t);while(p.length)p.shift()();return r.push.apply(r,l||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var u=a[i];0!==s[u]&&(n=!1)}n&&(r.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},s={app:0},r=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"142d":function(e,t,a){},"39c0":function(e,t,a){"use strict";var n=a("9249"),s=a.n(n);s.a},"4b02":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e.checkIfUserIsConnected()?a("navbar"):e._e(),a("router-view")],1)},r=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return null!=e.connectedUser?a("div",{directives:[{name:"show",rawName:"v-show",value:e.isConnected(),expression:"isConnected()"}],staticClass:"navbar"},[a("nav",{staticClass:"uk-navbar-container",attrs:{"uk-navbar":""}},[a("div",{staticClass:"uk-navbar-left uk-margin-left"},[a("span",[e._v(e._s(e.connectedUser.first_name.toUpperCase())+" "+e._s(e.connectedUser.last_name.toUpperCase()))])]),a("div",{staticClass:"uk-navbar-right uk-margin-right"},[a("ul",{staticClass:"uk-navbar-nav"},[a("li",[a("router-link",{attrs:{to:"dashboard"}},[e._v("Dashboard")])],1),a("li",[a("router-link",{attrs:{to:"absence"}},[e._v("Absence")])],1),a("li",[a("router-link",{attrs:{to:"profile"}},[e._v("Profil")])],1),a("li",{directives:[{name:"show",rawName:"v-show",value:"salarie"!=e.connectedUser.role,expression:"connectedUser.role != 'salarie'"}]},[a("router-link",{attrs:{to:"GestionUtilisateur"}},[e._v("Gestion")])],1)]),e.isConnected()?a("button",{staticClass:"uk-button uk-button-danger uk-button-small",on:{click:function(t){e.logout()}}},[e._v("Deconnexion")]):e._e()])])]):e._e()},i=[],u={name:"Navbar",data:function(){return{connectedUser:{}}},methods:{isConnected:function(){return null!=localStorage.getItem("jwt")},logout:function(){localStorage.removeItem("jwt"),localStorage.removeItem("user"),this.$router.push("login")},getUser:function(){this.connectedUser=JSON.parse(localStorage.getItem("user"))}},beforeMount:function(){this.getUser()}},l=u,c=(a("89b5"),a("2877")),d=Object(c["a"])(l,o,i,!1,null,"bf66286a",null);d.options.__file="Navbar.vue";var p=d.exports,v={name:"app",components:{Navbar:p},data:function(){return{isUserConnected:!1}},watch:{$route:function(e,t){console.log(e,t),this.checkIfUserIsConnected()}},methods:{checkIfUserIsConnected:function(){var e=JSON.parse(localStorage.getItem("user"));return null!=e&&(this.isUserConnected=!0,!0)}},mounted:function(){this.checkIfUserIsConnected()}},m=v,h=(a("5c0b"),Object(c["a"])(m,s,r,!1,null,null,null));h.options.__file="App.vue";var f=h.exports,_=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[e._m(0),a("form",{staticClass:"uk-form-horizontal uk-margin",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.signin(t)}}},[e._l(e.userInputs,function(t){return a("div",{key:t.key,staticClass:"uk-margin uk-width-1-1"},["email"==t.type?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"email"},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):e._e(),"password"==t.type?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"password"},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):e._e()])}),e.isSigningIn?a("div",{staticClass:"uk-width-1-1"}):a("div",{staticClass:"uk-width-1-1"},[a("button",{staticClass:"uk-button uk-button-primary uk-width-1-1",attrs:{type:"submit"}},[e._v("Se connecter")])])],2)])},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uk-height-medium uk-flex uk-flex-center uk-flex-middle uk-background-cover uk-light",attrs:{"data-src":"img/login/background.jpg","uk-img":""}},[a("h1",[e._v("Connexion")])])}],k=(a("96cf"),a("1da1")),y=a("bc3a"),w=a.n(y),C={name:"Login",data:function(){return{userInputs:{email:{id:"email",value:"",placeholder:"E-mail",isEmpty:!1,type:"email"},password:{id:"password",value:"",placeholder:"Mot de passe",isEmpty:!1,type:"password"}},redirectionURL:this.$route.query.redirect,isSigningIn:!1}},props:{},methods:{signin:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(s in n=this.userInputs,n)"email"==n[s].type&&(t=n[s].value),"password"==n[s].type&&(a=n[s].value);this.checkAccount(t,a);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkAccount:function(e,t){var a=this;w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/login",{email:e,password:t}).then(function(e){localStorage.jwt=e.data.token,localStorage.user=JSON.stringify(e.data.user),a.$router.push("dashboard")})},checkEmpty:function(e){e.isEmpty=""===e.value}}},U=C,A=(a("39c0"),Object(c["a"])(U,g,b,!1,null,"4af1bbec",null));A.options.__file="Login.vue";var E=A.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[0==e.listeEvenements.length?a("p",[e._v("Vous n'avez actuellement aucun évenement de prévu")]):e._e(),e._l(e.listeEvenements,function(t,n){return a("div",{key:n,staticClass:"uk-child-width-1-1@s"},[a("div",{staticClass:"uk-card uk-card-body uk-card-hover"},[a("div",{staticClass:"uk-card-badge uk-label"},[e._v(e._s(t.statut))]),a("h3",{staticClass:"uk-card-title"},[e._v("Motif : "+e._s(t.titre))]),a("p",[e._v("Absent du "+e._s(t.date_debut))]),a("p",[e._v("au "+e._s(t.date_fin))]),a("p",[e._v(e._s(e.traduitType(t.type)))])])])})],2)},D=[],x=(a("ac6a"),{name:"Dashboard",data:function(){return{schedules:[],options:{},listeEvenements:[],currentUser:{}}},methods:{getUserEvent:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/event/user/"+this.currentUser.id).then(function(t){t.data.forEach(function(t){e.listeEvenements.push(t)})})},traduitType:function(e){var t;switch(e){case"cp":t="Congé payé";break;case"css":t="Congé sans solde";break;case"rtt":t="Récuperation du temps de travail";break;case"ah":t="Amenagement d'horaire";break;default:t=e}return t}},beforeMount:function(){this.currentUser=JSON.parse(localStorage.getItem("user")),this.getUserEvent()}}),P=x,j=(a("8c05"),Object(c["a"])(P,N,D,!1,null,"13ccf3e6",null));j.options.__file="Dashboard.vue";var S=j.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createUser"},[a("h2",[e._v("Gestion des utilisateurs")]),a("table",{staticClass:"uk-table uk-table-striped"},[a("caption",[e._v("Liste des utilisateurs")]),e._m(0),a("tbody",e._l(e.listeUser,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.email))]),a("td",[e._v(e._s(t.first_name))]),a("td",[e._v(e._s(t.last_name))]),a("td",[e._v(e._s(t.phone))]),a("td",[e._v(e._s(t.date_de_naissance))]),a("td",[e._v(e._s(t.adresse))]),a("td",[e._v(e._s(t.code_postale))]),a("td",[e._v(e._s(t.role))]),a("td",[a("button",{staticClass:"uk-button uk-button-danger uk-button-small",attrs:{type:"button"},on:{click:function(a){e.deleteUser(t.id)}}},[a("span",{attrs:{"uk-icon":"trash"}})])])])}))]),a("hr"),a("h2",[e._v("Ajouter un Utilisateur")]),a("form",{staticClass:"uk-form-stacked",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.ajouter(t)}}},[e._l(e.userInputs,function(t){return a("div",{key:t.key},[a("label",{staticClass:"uk-form-label"},[e._v(e._s(t.placeholder))]),a("div",{staticClass:"uk-form-controls"},["checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:[function(a){var n=t.value,s=a.target,r=!!s.checked;if(Array.isArray(n)){var o=null,i=e._i(n,o);s.checked?i<0&&e.$set(t,"value",n.concat([o])):i>-1&&e.$set(t,"value",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(t,"value",r)},function(a){e.checkEmpty(t)}]}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:[function(a){e.$set(t,"value",null)},function(a){e.checkEmpty(t)}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})])])}),a("div",[a("label",{staticClass:"uk-form-label"},[e._v("Role")]),a("div",{staticClass:"uk-form-controls"},[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRole,expression:"selectedRole"}],staticClass:"uk-input",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRole=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:""}},[e._v("-- Role --")]),a("option",{attrs:{value:"respequipe"}},[e._v("Résponsable d'équipe")]),a("option",{attrs:{value:"drh"}},[e._v("Directeur des ressouces humaines")]),a("option",{attrs:{value:"salarie"}},[e._v("Salarié")])])])]),e.isSigningIn?a("div",{staticClass:"uk-width-1-1"}):a("div",{staticClass:"uk-width-1-1"},[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit"}},[e._v("Créer")])])],2)])},O=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Adresse mail")]),a("th",[e._v("Prénom")]),a("th",[e._v("Nom")]),a("th",[e._v("Téléphone")]),a("th",[e._v("Date de naissance")]),a("th",[e._v("Adresse")]),a("th",[e._v("Code postale")]),a("th",[e._v("Role")]),a("th")])])}],$=a("8323"),R=a.n($),V={name:"CreateUser",data:function(){return{listeUser:[],userInputs:{lastName:{id:"nom",value:"",placeholder:"Votre nom",isEmpty:!1,type:"text"},firstName:{id:"prenom",value:"",placeholder:"Votre prénom",isEmpty:!1,type:"text"},birthDate:{id:"dateDeNaissance",value:"",placeholder:"Votre date de naissance",isEmpty:!1,type:"date"},phone:{id:"phone",value:"",placeholder:"Votre numéro de téléphone",isEmpty:!1,type:"text"},adresse:{id:"adresse",value:"",placeholder:"Votre adresse",isEmpty:!1,type:"text"},codePostale:{id:"codePostale",value:"",placeholder:"Votre code postale",isEmpty:!1,type:"text"},email:{id:"email",value:"",placeholder:"E-mail",isEmpty:!1,type:"email"},password:{id:"password",value:"",placeholder:"Mot de passe",isEmpty:!1,type:"password"},verifyPassword:{id:"verifyPassword",value:"",placeholder:"Confirmer mot de passe",isEmpty:!1,type:"password"}},redirectionURL:this.$route.query.redirect,isSigningIn:!1,selectedRole:""}},props:{},methods:{ajouter:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t,a,n,s,r,o,i,u,l,c,d,p;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(p in c=this.selectedRole,d=this.userInputs,d)"email"==d[p].type&&(n=d[p].value),"password"==d[p].id&&(u=d[p].value),"verifyPassword"==d[p].id&&(l=d[p].value),"prenom"==d[p].id&&(t=d[p].value),"nom"==d[p].id&&(a=d[p].value),"phone"==d[p].id&&(i=d[p].value),"adresse"==d[p].id&&(s=d[p].value),"codePostale"==d[p].id&&(r=d[p].value),"dateDeNaissance"==d[p].id&&(o=d[p].value);u==l&&this.createAccount(t,a,n,i,s,r,o,u,c);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createAccount:function(e,t,a,n,s,r,o,i,u){w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/register",{firstName:e,lastName:t,email:a,phone:n,adresse:s,codePostale:r,dateNaissance:o,password:i,role:u}).then(function(){})},checkEmpty:function(e){e.isEmpty=""===e.value},getAllUsers:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/user").then(function(t){t.data.forEach(function(t){e.listeUser.push(t)})}).catch(function(e){console.log(e)})},deleteUser:function(e){var t=this;w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/deleteuser",{id:e}).then(function(e){t.getAllUsers(),200==e.status&&R.a.notification({message:"L'utilisateur a correctement été supprimé",status:"success",pos:"top-right",timeout:2e3})}).catch(function(e){R.a.notification({message:"Erreur lors de la suppression de l'utilisateur",status:"error",pos:"top-right",timeout:2e3}),console.log(e)})}},beforeMount:function(){this.getAllUsers()}},M=V,T=(a("f1ca"),Object(c["a"])(M,I,O,!1,null,"333585bb",null));T.options.__file="GestionUtilisateur.vue";var q=T.exports,F=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile"},[a("div",{staticClass:"uk-margin-left"},[a("h2",[e._v("Votre profile")]),a("div",{staticClass:"uk-column-1-2 uk-align-center"},[a("p",[e._v(e._s(e.profileUser.first_name))]),a("p",[e._v(e._s(e.profileUser.last_name))]),a("p",[e._v(e._s(e.profileUser.email))]),a("p",[e._v(e._s(e.profileUser.phone))]),a("p",[e._v(e._s(e.profileUser.adresse))]),a("p",[e._v(e._s(e.profileUser.code_postale))]),a("p",[e._v(e._s(e.profileUser.date_de_naissance))])])]),a("hr"),a("div",{staticClass:"uk-margin-left"},[a("h2",[e._v("Modification de vos informations")]),a("form",{staticClass:"uk-form-stacked",on:{submit:function(t){return t.preventDefault(),e.modifierUser(t)}}},[a("div",[a("label",{staticClass:"uk-form-label"},[e._v("Votre nouvelle adresse")]),a("div",{staticClass:"uk-form-controls"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newAdresse,expression:"newAdresse"}],staticClass:"uk-input",attrs:{placeholder:"Nouvelle adresse",type:"text"},domProps:{value:e.newAdresse},on:{input:function(t){t.target.composing||(e.newAdresse=t.target.value)}}})])]),a("div",[a("label",{staticClass:"uk-form-label"},[e._v("Votre nouveau code postale")]),a("div",{staticClass:"uk-form-controls"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newCodePostale,expression:"newCodePostale"}],staticClass:"uk-input",attrs:{placeholder:"Nouveau code postale",type:"text"},domProps:{value:e.newCodePostale},on:{input:function(t){t.target.composing||(e.newCodePostale=t.target.value)}}})])]),a("div",{staticStyle:{"margin-bottom":"15px"}},[a("label",{staticClass:"uk-form-label"},[e._v("Votre nouveau numéro de téléphone")]),a("div",{staticClass:"uk-form-controls"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.newPhoneNumber,expression:"newPhoneNumber"}],staticClass:"uk-input",attrs:{placeholder:"Nouveau numéro de téléphone",type:"text"},domProps:{value:e.newPhoneNumber},on:{input:function(t){t.target.composing||(e.newPhoneNumber=t.target.value)}}})])]),e._m(0)])])])},J=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit"}},[e._v("Valider")])])}],L={name:"Profile",data:function(){return{profileUser:{},newAdresse:"",newCodePostale:"",newPhoneNumber:""}},methods:{modifierUser:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:w.a.put("https://gta-ynov-vuejs-api.herokuapp.com/user",{firstName:this.profileUser.first_name,lastName:this.profileUser.last_name,email:this.profileUser.email,phone:""!=this.newPhoneNumber?this.newPhoneNumber:this.profileUser.phone,adresse:""!=this.newAdresse?this.newAdresse:this.profileUser.adresse,codePostale:""!=this.newCodePostale?this.newCodePostale:this.profileUser.codePostale,dateNaissance:this.profileUser.date_de_naissance,role:this.profileUser.role,id:this.profileUser.id}).then(function(e){t.getUser(t.profileUser.id),200==e.status?R.a.notification({message:"Modification du profil prise en compte",status:"success",pos:"top-right",timeout:2e3}):R.a.notification({message:"Erreur lors de la modification du profile",status:"error",pos:"top-right",timeout:2e3})});case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getUser:function(e){w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/user/"+e).then(function(e){console.log(e),localStorage.user=JSON.stringify(e.data)})}},beforeMount:function(){this.profileUser=JSON.parse(localStorage.getItem("user"))}},G=L,z=(a("f29a"),Object(c["a"])(G,F,J,!1,null,"0c5c1421",null));z.options.__file="Profile.vue";var B=z.exports,H=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absence"},[a("h2",[e._v("Saisie de vos absences")]),a("form",{staticClass:"uk-form-horizontal uk-margin",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.ajouterEvent(t)}}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.titreDemande,expression:"titreDemande"}],staticClass:"uk-input",attrs:{placeholder:"Motif de votre demande",type:"text"},domProps:{value:e.titreDemande},on:{input:function(t){t.target.composing||(e.titreDemande=t.target.value)}}})]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDebutDemande,expression:"dateDebutDemande"}],staticClass:"uk-input",attrs:{type:"date"},domProps:{value:e.dateDebutDemande},on:{input:function(t){t.target.composing||(e.dateDebutDemande=t.target.value)}}})]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFinDemande,expression:"dateFinDemande"}],staticClass:"uk-input",attrs:{type:"date"},domProps:{value:e.dateFinDemande},on:{input:function(t){t.target.composing||(e.dateFinDemande=t.target.value)}}})]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.typeDemande,expression:"typeDemande"}],staticClass:"uk-input",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.typeDemande=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:""}},[e._v("-- Type --")]),a("option",{attrs:{value:"cp"}},[e._v("Congé payé")]),a("option",{attrs:{value:"css"}},[e._v("Congé sans solde")]),a("option",{attrs:{value:"rtt"}},[e._v("Récuperation du temps de travail")]),a("option",{attrs:{value:"ah"}},[e._v("Amenagement d'horaire")])])]),e._m(0)]),a("hr"),a("div",{directives:[{name:"show",rawName:"v-show",value:"salarie"!=e.currentUser.role,expression:"currentUser.role != 'salarie'"}]},[a("h2",[e._v("Validation des absences")]),a("table",{staticClass:"uk-table uk-table-striped"},[a("caption",[e._v("Liste des absences à valider")]),e._m(1),a("tbody",e._l(e.listeAbsenceEnAttente,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.titre))]),a("td",[e._v(e._s(e.traduitType(t.type)))]),a("td",[e._v(e._s(t.date_debut))]),a("td",[e._v(e._s(t.date_fin))]),a("td",[e._v(e._s(t.statut))]),a("td",[a("button",{staticClass:"uk-button uk-button-primary uk-button-small",attrs:{type:"button"},on:{click:function(a){e.valideAbsenceColaborateur(t.id,"valider")}}},[e._v("Valider")]),a("button",{staticClass:"uk-button uk-button-danger uk-button-small",attrs:{type:"button"},on:{click:function(a){e.valideAbsenceColaborateur(t.id,"refuser")}}},[e._v("Refuser")])])])}))]),a("hr")]),a("h2",[e._v("Historique de vos absences")]),a("table",{staticClass:"uk-table uk-table-striped"},[a("caption",[e._v("Liste des absences")]),e._m(2),a("tbody",e._l(e.listeAbsence,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.titre))]),a("td",[e._v(e._s(e.traduitType(t.type)))]),a("td",[e._v(e._s(t.date_debut))]),a("td",[e._v(e._s(t.date_fin))]),a("td",[e._v(e._s(t.statut))])])}))])])},K=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit"}},[e._v("Valider")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Motif")]),a("th",[e._v("Type")]),a("th",[e._v("Date début")]),a("th",[e._v("Date fin")]),a("th",[e._v("Statut")]),a("th")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Motif")]),a("th",[e._v("Type")]),a("th",[e._v("Date début")]),a("th",[e._v("Date fin")]),a("th",[e._v("Statut")])])])}],Q={name:"Absence",data:function(){return{titreDemande:"",typeDemande:"",dateDebutDemande:"",dateFinDemande:"",currentUser:{},listeAbsence:[],listeAbsenceEnAttente:[]}},methods:{ajouterEvent:function(){var e=Object(k["a"])(regeneratorRuntime.mark(function e(){var t,a=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.checkIfNotNull(this.titreDemande)&&this.checkIfNotNull(this.typeDemande)&&this.checkIfNotNull(this.dateDebutDemande)&&this.checkIfNotNull(this.dateFinDemande)&&(t=JSON.parse(localStorage.getItem("user")),w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/event",{titre:this.titreDemande,type:this.typeDemande,statut:"en attente",date_debut:this.dateDebutDemande,date_fin:this.dateFinDemande,user:t.id}).then(function(e){200==e.status?(a.resetAbsenceForm(),R.a.notification({message:"Votre absence a correctement été ajouté",status:"success",pos:"top-right",timeout:2e3}),a.getUserAbsence()):R.a.notification({message:"Erreur lors de l'ajout de l'absence",status:"error",pos:"top-right",timeout:2e3})}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),resetAbsenceForm:function(){this.titreDemande="",this.typeDemande="",this.dateDebutDemande="",this.dateFinDemande=""},checkIfNotNull:function(e){return""!=e},getUserAbsence:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/event/user/"+this.currentUser.id).then(function(t){e.listeAbsence=[],t.data.forEach(function(t){e.listeAbsence.push(t)})}).catch(function(e){console.log(e)})},getAbsenceToValidate:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/event/user/"+this.currentUser.id+"/attente").then(function(t){console.log(t),e.listeAbsenceEnAttente=[],t.data.forEach(function(t){e.listeAbsenceEnAttente.push(t)})}).catch(function(e){console.log(e)})},valideAbsenceColaborateur:function(e,t){w.a.put("https://gta-ynov-vuejs-api.herokuapp.com/event/statut",{statut:t,id:e}).then(function(e){console.log(e)})},traduitType:function(e){var t;switch(e){case"cp":t="Congé payé";break;case"css":t="Congé sans solde";break;case"rtt":t="Récuperation du temps de travail";break;case"ah":t="Amenagement d'horaire";break;default:t=e}return t}},mounted:function(){this.currentUser=JSON.parse(localStorage.getItem("user")),this.getUserAbsence(),this.getAbsenceToValidate()}},W=Q,X=(a("7049"),Object(c["a"])(W,H,K,!1,null,"67d0a3de",null));X.options.__file="Absence.vue";var Y=X.exports;n["a"].use(_["a"]);var Z=new _["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:E,meta:{guest:!0}},{path:"/dashboard",name:"Dashboard",component:S,meta:{requiresAuth:!0}},{path:"/gestionUtilisateur",name:"GestionUtilisateur",component:q,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:B,meta:{requiresAuth:!0}},{path:"/absence",name:"Absence",component:Y,meta:{requiresAuth:!0}}]});Z.beforeEach(function(e,t,a){if(e.matched.some(function(e){return e.meta.requiresAuth}))if(null==localStorage.getItem("jwt"))a({path:"/login",params:{nextUrl:e.fullPath}});else{var n=JSON.parse(localStorage.getItem("user"));e.matched.some(function(e){return e.meta.role})?n.role===e.meta.role?a():a({name:"Dashboard"}):a()}else e.matched.some(function(e){return e.meta.guest})?null==localStorage.getItem("jwt")?a():a({name:"Dashboard"}):a()});var ee=Z,te=a("263c"),ae=a.n(te),ne=a("9483");Object(ne["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),n["a"].config.productionTip=!1,R.a.use(ae.a),new n["a"]({router:ee,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),s=a.n(n);s.a},"5e27":function(e,t,a){},7049:function(e,t,a){"use strict";var n=a("142d"),s=a.n(n);s.a},"71c3":function(e,t,a){},"89b5":function(e,t,a){"use strict";var n=a("71c3"),s=a.n(n);s.a},"8c05":function(e,t,a){"use strict";var n=a("4b02"),s=a.n(n);s.a},9249:function(e,t,a){},a511:function(e,t,a){},b719:function(e,t,a){},f1ca:function(e,t,a){"use strict";var n=a("a511"),s=a.n(n);s.a},f29a:function(e,t,a){"use strict";var n=a("b719"),s=a.n(n);s.a}});
//# sourceMappingURL=app.151c37c0.js.map