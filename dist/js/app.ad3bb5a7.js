(function(e){function t(t){for(var n,o,i=t[0],u=t[1],l=t[2],p=0,d=[];p<i.length;p++)o=i[p],r[o]&&d.push(r[o][0]),r[o]=0;for(n in u)Object.prototype.hasOwnProperty.call(u,n)&&(e[n]=u[n]);c&&c(t);while(d.length)d.shift()();return s.push.apply(s,l||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],n=!0,i=1;i<a.length;i++){var u=a[i];0!==r[u]&&(n=!1)}n&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var n={},r={app:0},s=[];function o(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=n,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(a,n,function(t){return e[t]}.bind(null,n));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var c=u;s.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"17ae":function(e,t,a){"use strict";var n=a("babb"),r=a.n(n);r.a},"1e0c":function(e,t,a){"use strict";var n=a("efb0"),r=a.n(n);r.a},"1f72":function(e,t,a){},"2acc":function(e,t,a){"use strict";var n=a("b737"),r=a.n(n);r.a},"310d":function(e,t,a){},"39c0":function(e,t,a){"use strict";var n=a("9249"),r=a.n(n);r.a},"3ef1":function(e,t,a){"use strict";var n=a("310d"),r=a.n(n);r.a},"56d7":function(e,t,a){"use strict";a.r(t);a("cadf"),a("551c"),a("097d");var n=a("2b0e"),r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("navbar",{directives:[{name:"show",rawName:"v-show",value:e.isUserConnected,expression:"isUserConnected"}]}),a("router-view")],1)},s=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isConnected()?a("div",{staticClass:"navbar"},[a("nav",{staticClass:"uk-navbar-container",attrs:{"uk-navbar":""}},[a("div",{staticClass:"uk-navbar-left uk-margin-left"},[a("span",[e._v(e._s(e.connectedUser.first_name.toUpperCase())+"  "+e._s(e.connectedUser.last_name.toUpperCase()))])]),a("div",{staticClass:"uk-navbar-right uk-margin-right"},[a("ul",{staticClass:"uk-navbar-nav"},[a("li",[a("router-link",{attrs:{to:"dashboard"}},[e._v("Dashboard")])],1),a("li",[a("router-link",{attrs:{to:"absence"}},[e._v("Absence")])],1),a("li",[a("router-link",{attrs:{to:"profile"}},[e._v("Profil")])],1),"drh"==e.connectedUser.role?a("li",[a("router-link",{attrs:{to:"GestionUtilisateur"}},[e._v("Gestion")])],1):e._e()]),e.isConnected()?a("button",{staticClass:"uk-button uk-button-danger uk-button-small",on:{click:function(t){e.logout()}}},[e._v("Deconnexion")]):e._e()])])]):e._e()},i=[],u={name:"Navbar",data:function(){return{connectedUser:{}}},methods:{isConnected:function(){return null!=localStorage.getItem("jwt")},logout:function(){localStorage.removeItem("jwt"),localStorage.removeItem("user"),this.$router.push("login")},getUser:function(){this.connectedUser=JSON.parse(localStorage.getItem("user"))}},beforeMount:function(){this.getUser()}},l=u,c=(a("3ef1"),a("2877")),p=Object(c["a"])(l,o,i,!1,null,"1338da7e",null);p.options.__file="Navbar.vue";var d=p.exports,v={name:"app",components:{Navbar:d},data:function(){return{isUserConnected:!1}},beforeMount:function(){var e=JSON.parse(localStorage.getItem("user"));null!=e&&(this.isUserConnected=!0)}},m=v,f=(a("5c0b"),Object(c["a"])(m,r,s,!1,null,null,null));f.options.__file="App.vue";var h=f.exports,_=a("8c4f"),g=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"login"},[e._m(0),a("form",{staticClass:"uk-form-horizontal uk-margin",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.signin(t)}}},[e._l(e.userInputs,function(t){return a("div",{key:t.key,staticClass:"uk-margin uk-width-1-1"},["email"==t.type?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"email"},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):e._e(),"password"==t.type?a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"password"},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})]):e._e()])}),e.isSigningIn?a("div",{staticClass:"uk-width-1-1"}):a("div",{staticClass:"uk-width-1-1"},[a("button",{staticClass:"uk-button uk-button-primary uk-width-1-1",attrs:{type:"submit"}},[e._v("Se connecter")])])],2)])},b=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"uk-height-medium uk-flex uk-flex-center uk-flex-middle uk-background-cover uk-light",attrs:{"data-src":"img/login/background.jpg","uk-img":""}},[a("h1",[e._v("Connexion")])])}],y=(a("96cf"),a("1da1")),k=a("bc3a"),w=a.n(k),D={name:"Login",data:function(){return{userInputs:{email:{id:"email",value:"",placeholder:"E-mail",isEmpty:!1,type:"email"},password:{id:"password",value:"",placeholder:"Mot de passe",isEmpty:!1,type:"password"}},redirectionURL:this.$route.query.redirect,isSigningIn:!1}},props:{},methods:{signin:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(r in n=this.userInputs,n)"email"==n[r].type&&(t=n[r].value),"password"==n[r].type&&(a=n[r].value);this.checkAccount(t,a);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkAccount:function(e,t){var a=this;w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/login",{email:e,password:t}).then(function(e){localStorage.jwt=e.data.token,localStorage.user=JSON.stringify(e.data.user),a.$router.push("dashboard")})},checkEmpty:function(e){e.isEmpty=""===e.value}}},E=D,C=(a("39c0"),Object(c["a"])(E,g,b,!1,null,"4af1bbec",null));C.options.__file="Login.vue";var U=C.exports,N=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dashboard"},[a("vue-tuicalendar",{ref:"calendar",attrs:{options:e.options,schedules:e.listeEvenements}})],1)},x=[],j=(a("ac6a"),{name:"Dashboard",data:function(){return{schedules:[],options:{},listeEvenements:[],currentUser:{}}},methods:{getUserEvent:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/event/user/"+this.currentUser.id).then(function(t){t.data.forEach(function(t){e.listeEvenements.push(t)})})}},beforeMount:function(){this.currentUser=JSON.parse(localStorage.getItem("user")),this.getUserEvent()}}),S=j,A=(a("17ae"),Object(c["a"])(S,N,x,!1,null,"0a7a8887",null));A.options.__file="Dashboard.vue";var O=A.exports,I=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"createUser"},[a("h2",[e._v("Gestion des utilisateurs")]),a("table",{staticClass:"uk-table  uk-table-striped"},[a("caption",[e._v("Liste des utilisateurs")]),e._m(0),a("tbody",e._l(e.listeUser,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.email))]),a("td",[e._v(e._s(t.first_name))]),a("td",[e._v(e._s(t.last_name))]),a("td",[e._v(e._s(t.phone))]),a("td",[e._v(e._s(t.date_de_naissance))]),a("td",[e._v(e._s(t.adresse))]),a("td",[e._v(e._s(t.code_postale))]),a("td",[e._v(e._s(t.role))])])}))]),a("hr"),a("h2",[e._v("Ajouter un Utilisateur")]),a("form",{staticClass:"uk-form-horizontal uk-margin uk-column-1-1@s uk-column-1-2@m uk-column-1-3@l",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.ajouter(t)}}},[e._l(e.userInputs,function(t){return a("div",{key:t.key},["dateDeNaissance"==t.id?a("label",[e._v("Date de naissance")]):e._e(),"checkbox"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"checkbox"},domProps:{checked:Array.isArray(t.value)?e._i(t.value,null)>-1:t.value},on:{change:[function(a){var n=t.value,r=a.target,s=!!r.checked;if(Array.isArray(n)){var o=null,i=e._i(n,o);r.checked?i<0&&e.$set(t,"value",n.concat([o])):i>-1&&e.$set(t,"value",n.slice(0,i).concat(n.slice(i+1)))}else e.$set(t,"value",s)},function(a){e.checkEmpty(t)}]}}):"radio"===t.type?a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:"radio"},domProps:{checked:e._q(t.value,null)},on:{change:[function(a){e.$set(t,"value",null)},function(a){e.checkEmpty(t)}]}}):a("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"input.value"}],class:["uk-input",{"uk-form-danger":t.isEmpty}],attrs:{placeholder:t.placeholder,type:t.type},domProps:{value:t.value},on:{change:function(a){e.checkEmpty(t)},input:function(a){a.target.composing||e.$set(t,"value",a.target.value)}}})])}),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.selectedRole,expression:"selectedRole"}],staticClass:"uk-input",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.selectedRole=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:""}},[e._v("-- Role --")]),a("option",{attrs:{value:"respequipe"}},[e._v("Résponsable d'équipe")]),a("option",{attrs:{value:"drh"}},[e._v("Directeur des ressouces humaines")]),a("option",{attrs:{value:"salarie"}},[e._v("Salarié")])])]),e.isSigningIn?a("div",{staticClass:"uk-width-1-1"}):a("div",{staticClass:"uk-width-1-1"},[a("button",{staticClass:"uk-button uk-button-primary ",attrs:{type:"submit"}},[e._v("Créer")])])],2)])},P=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Adresse mail")]),a("th",[e._v("Prénom")]),a("th",[e._v("Nom")]),a("th",[e._v("Téléphone")]),a("th",[e._v("Date de naissance")]),a("th",[e._v("Adresse")]),a("th",[e._v("Code postale")]),a("th",[e._v("Role")])])])}],$={name:"CreateUser",data:function(){return{listeUser:[],userInputs:{lastName:{id:"nom",value:"",placeholder:"Votre nom",isEmpty:!1,type:"text"},firstName:{id:"prenom",value:"",placeholder:"Votre prénom",isEmpty:!1,type:"text"},birthDate:{id:"dateDeNaissance",value:"",placeholder:"",isEmpty:!1,type:"date"},phone:{id:"phone",value:"",placeholder:"Votre numéro de téléphone",isEmpty:!1,type:"text"},adresse:{id:"adresse",value:"",placeholder:"Votre adresse",isEmpty:!1,type:"text"},codePostale:{id:"codePostale",value:"",placeholder:"Votre code postale",isEmpty:!1,type:"text"},email:{id:"email",value:"",placeholder:"E-mail",isEmpty:!1,type:"email"},password:{id:"password",value:"",placeholder:"Mot de passe",isEmpty:!1,type:"password"},verifyPassword:{id:"verifyPassword",value:"",placeholder:"Confirmer mot de passe",isEmpty:!1,type:"password"}},redirectionURL:this.$route.query.redirect,isSigningIn:!1,selectedRole:""}},props:{},methods:{ajouter:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t,a,n,r,s,o,i,u,l,c,p,d;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(d in c=this.selectedRole,p=this.userInputs,p)"email"==p[d].type&&(n=p[d].value),"password"==p[d].id&&(u=p[d].value),"verifyPassword"==p[d].id&&(l=p[d].value),"prenom"==p[d].id&&(t=p[d].value),"nom"==p[d].id&&(a=p[d].value),"phone"==p[d].id&&(i=p[d].value),"adresse"==p[d].id&&(r=p[d].value),"codePostale"==p[d].id&&(s=p[d].value),"dateDeNaissance"==p[d].id&&(o=p[d].value);u==l&&this.createAccount(t,a,n,i,r,s,o,u,c);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),createAccount:function(e,t,a,n,r,s,o,i,u){w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/register",{firstName:e,lastName:t,email:a,phone:n,adresse:r,codePostale:s,dateNaissance:o,password:i,role:u}).then(function(){})},checkEmpty:function(e){e.isEmpty=""===e.value},getAllUsers:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/users").then(function(t){t.data.forEach(function(t){e.listeUser.push(t)})})}},beforeMount:function(){this.getAllUsers()}},R=$,q=(a("a687"),Object(c["a"])(R,I,P,!1,null,"43ba3aeb",null));q.options.__file="GestionUtilisateur.vue";var M=q.exports,J=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"profile"},[a("h2",[e._v("Votre profile")]),a("p",[e._v(e._s(e.profileUser.first_name))]),a("p",[e._v(e._s(e.profileUser.last_name))]),a("p",[e._v(e._s(e.profileUser.email))]),a("p",[e._v(e._s(e.profileUser.phone))]),a("p",[e._v(e._s(e.profileUser.adresse))]),a("p",[e._v(e._s(e.profileUser.code_postale))]),a("p",[e._v(e._s(e.profileUser.date_de_naissance))])])},F=[],T={name:"Profile",data:function(){return{profileUser:{}}},beforeMount:function(){this.profileUser=JSON.parse(localStorage.getItem("user"))}},V=T,L=(a("1e0c"),Object(c["a"])(V,J,F,!1,null,"2f2e780a",null));L.options.__file="Profile.vue";var G=L.exports,z=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"absence"},[a("h2",[e._v("Saisie des absences")]),a("form",{staticClass:"uk-form-horizontal uk-margin",attrs:{"uk-grid":""},on:{submit:function(t){return t.preventDefault(),e.ajouterEvent(t)}}},[a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.titreDemande,expression:"titreDemande"}],staticClass:"uk-input",attrs:{placeholder:"Titre de votre demande",type:"text"},domProps:{value:e.titreDemande},on:{input:function(t){t.target.composing||(e.titreDemande=t.target.value)}}})]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateDebutDemande,expression:"dateDebutDemande"}],staticClass:"uk-input",attrs:{type:"date"},domProps:{value:e.dateDebutDemande},on:{input:function(t){t.target.composing||(e.dateDebutDemande=t.target.value)}}})]),a("div",[a("input",{directives:[{name:"model",rawName:"v-model",value:e.dateFinDemande,expression:"dateFinDemande"}],staticClass:"uk-input",attrs:{type:"date"},domProps:{value:e.dateFinDemande},on:{input:function(t){t.target.composing||(e.dateFinDemande=t.target.value)}}})]),a("div",[a("select",{directives:[{name:"model",rawName:"v-model",value:e.typeDemande,expression:"typeDemande"}],staticClass:"uk-input",on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,function(e){return e.selected}).map(function(e){var t="_value"in e?e._value:e.value;return t});e.typeDemande=t.target.multiple?a:a[0]}}},[a("option",{attrs:{selected:"",value:""}},[e._v("-- Type --")]),a("option",{attrs:{value:"cp"}},[e._v("Congé payé")]),a("option",{attrs:{value:"css"}},[e._v("Congé sans solde")]),a("option",{attrs:{value:"rtt"}},[e._v("Récuperation du temps de travail")]),a("option",{attrs:{value:"ah"}},[e._v("Amenagement d'horaire")])])]),e._m(0)]),a("hr"),a("h2",[e._v("Historique de vos absences")]),a("table",{staticClass:"uk-table  uk-table-striped"},[a("caption",[e._v("Liste des absences")]),e._m(1),a("tbody",e._l(e.listeAbsence,function(t,n){return a("tr",{key:n},[a("td",[e._v(e._s(t.titre))]),a("td",[e._v(e._s(t.type))]),a("td",[e._v(e._s(t.dateDebut))]),a("td",[e._v(e._s(t.datefin))]),a("td",[e._v(e._s(t.statut))])])}))])])},B=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("button",{staticClass:"uk-button uk-button-primary",attrs:{type:"submit"}},[e._v("Valider")])])},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("thead",[a("tr",[a("th",[e._v("Titre")]),a("th",[e._v("Type")]),a("th",[e._v("Date début")]),a("th",[e._v("Date fin")]),a("th",[e._v("Statut")])])])}],H=a("8323"),K=a.n(H),Q={name:"Absence",data:function(){return{titreDemande:"",typeDemande:"",dateDebutDemande:"",dateFinDemande:"",currentUser:{},listeAbsence:[]}},methods:{ajouterEvent:function(){var e=Object(y["a"])(regeneratorRuntime.mark(function e(){var t;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:this.checkIfNotNull(this.titreDemande)&&this.checkIfNotNull(this.typeDemande)&&this.checkIfNotNull(this.dateDemande)&&this.checkIfNotNull(this.dateFinDemande)&&(t=JSON.parse(localStorage.getItem("user")),w.a.post("https://gta-ynov-vuejs-api.herokuapp.com/event",{titre:this.titreDemande,type:this.typeDemande,statut:"en attente",date_debut:this.dateDebutDemande,date_fin:this.dateFinDemande,userid:t.id}).then(function(e){200==e.status?K.a.notification({message:"Votre absence a correctement été ajouté",status:"success",pos:"top-right",timeout:2e3}):K.a.notification({message:"Erreur lors de l'ajout de l'absence",status:"error",pos:"top-right",timeout:2e3})}));case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),checkIfNotNull:function(e){return""!=e},getUserAbsence:function(){var e=this;w.a.get("https://gta-ynov-vuejs-api.herokuapp.com/event/user/"+this.currentUser.id).then(function(t){t.data.forEach(function(t){e.listeAbsence.push(t)})})}},beforeMount:function(){this.currentUser=JSON.parse(localStorage.getItem("user")),this.getUserAbsence()}},W=Q,X=(a("2acc"),Object(c["a"])(W,z,B,!1,null,"0b80c36b",null));X.options.__file="Absence.vue";var Y=X.exports;n["a"].use(_["a"]);var Z=new _["a"]({routes:[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:U,meta:{guest:!0}},{path:"/dashboard",name:"Dashboard",component:O,meta:{requiresAuth:!0}},{path:"/gestionUtilisateur",name:"GestionUtilisateur",component:M,meta:{requiresAuth:!0}},{path:"/profile",name:"Profile",component:G,meta:{requiresAuth:!0}},{path:"/absence",name:"Absence",component:Y,meta:{requiresAuth:!0}}]});Z.beforeEach(function(e,t,a){if(e.matched.some(function(e){return e.meta.requiresAuth}))if(null==localStorage.getItem("jwt"))a({path:"/login",params:{nextUrl:e.fullPath}});else{var n=JSON.parse(localStorage.getItem("user"));e.matched.some(function(e){return e.meta.role})?n.role===e.meta.role?a():a({name:"Dashboard"}):a()}else e.matched.some(function(e){return e.meta.guest})?null==localStorage.getItem("jwt")?a():a({name:"Dashboard"}):a()});var ee=Z,te=a("263c"),ae=a.n(te),ne=a("9483");Object(ne["a"])("".concat("/","service-worker.js"),{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}});var re=a("eed8"),se=a.n(re);a("c7bb");n["a"].config.productionTip=!1,K.a.use(ae.a),n["a"].use(se.a),new n["a"]({router:ee,render:function(e){return e(h)}}).$mount("#app")},"5c0b":function(e,t,a){"use strict";var n=a("5e27"),r=a.n(n);r.a},"5e27":function(e,t,a){},9249:function(e,t,a){},a687:function(e,t,a){"use strict";var n=a("1f72"),r=a.n(n);r.a},b737:function(e,t,a){},babb:function(e,t,a){},efb0:function(e,t,a){}});
//# sourceMappingURL=app.ad3bb5a7.js.map